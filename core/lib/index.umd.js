(function(y){typeof define=="function"&&define.amd?define(y):y()})(function(){"use strict";var xe=Object.defineProperty;var Se=(y,x,D)=>x in y?xe(y,x,{enumerable:!0,configurable:!0,writable:!0,value:D}):y[x]=D;var z=(y,x,D)=>(Se(y,typeof x!="symbol"?x+"":x,D),D);function y(r){"@babel/helpers - typeof";return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(r)}function x(r,e){if(y(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(y(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function D(r){var e=x(r,"string");return y(e)=="symbol"?e:e+""}function w(r,e,t){return(e=D(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var F={},Q=[],he=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function X(r){var e=r.parentNode;e&&e.removeChild(r)}function C(r){return typeof r=="function"}var R=Q.slice,f={_catchError:function(r,e,t,n){for(var o,l,i;e=e._parent;)if((o=e._component)&&!o._processingException)try{if((l=o.constructor)&&l.getDerivedStateFromError!=null&&(Object.assign(o,l.getDerivedStateFromError(r)),i=o._dirty),o.componentDidCatch!=null&&(o.componentDidCatch(r,n||{}),i=o._dirty),i)return o._pendingError=o}catch(a){r=a}throw r}},fe=0;function Y(r,e,t){var n,o,l,i={};for(l in e)l=="key"?n=e[l]:l=="ref"?o=e[l]:i[l]=e[l];if(arguments.length>2&&(i.children=arguments.length>3?R.call(arguments,2):t),typeof r=="function"&&r.defaultProps!=null)for(l in r.defaultProps)i[l]===void 0&&(i[l]=r.defaultProps[l]);return U(r,i,n,o,null)}function U(r,e,t,n,o){var l={type:r,props:e,key:t,ref:n,_children:null,_parent:null,_depth:0,_dom:null,_nextDom:void 0,_component:null,_hydrating:null,constructor:void 0,_original:o??++fe};return o==null&&f.vnode!=null&&f.vnode(l),l}function M(r){return r.children}function Z(r){this.props=r,this._dirty=!1}function T(r,e){if(e==null)return r._parent?T(r._parent,r._parent._children.indexOf(r)+1):null;for(var t;e<r._children.length;e++)if((t=r._children[e])!=null&&t._dom!=null)return t._dom;return typeof r.type=="function"?T(r):null}function ee(r,e,t,n,o,l,i){var a,s,u,c,_,A,g,v=n&&n._children||Q,d=v.length;for(t._children=[],a=0;a<e.length;a++)if((c=(c=e[a])==null||typeof c=="boolean"||typeof c=="function"?t._children[a]=null:typeof c=="string"||typeof c=="number"||typeof c=="bigint"?t._children[a]=U(null,c,null,null,c):Array.isArray(c)?t._children[a]=U(M,{children:c},null,null,null):c._depth>0?t._children[a]=U(c.type,c.props,c.key,c.ref?c.ref:null,c._original):t._children[a]=c)!=null){if(c._parent=t,c._depth=t._depth+1,(u=v[a])===null||u&&c.key==u.key&&c.type===u.type)v[a]=void 0;else for(s=0;s<d;s++){if((u=v[s])&&c.key==u.key&&c.type===u.type){v[s]=void 0;break}u=null}ae(r,c,u=u||F,o,l,i),_=c._dom,(s=c.ref)&&u.ref!=s&&(g||(g=[]),u.ref&&g.push(u.ref,null,c),g.push(s,c._component||_,c)),_!=null?(A==null&&(A=_),typeof c.type=="function"&&c._children===u._children?c._nextDom=i=te(c,i,r):i=re(r,c,u,v,_,i),typeof t.type=="function"&&(t._nextDom=i)):i&&u._dom==i&&i.parentNode!=r&&(i=T(u))}for(t._dom=A,a=d;a--;)v[a]!=null&&(typeof t.type=="function"&&v[a]._dom!=null&&v[a]._dom==t._nextDom&&(t._nextDom=ne(n).nextSibling),ce(v[a],v[a]));if(g)for(a=0;a<g.length;a++)se(g[a],g[++a],g[++a])}function te(r,e,t){for(var n=r._children,o=0;n&&o<n.length;o++){var l=n[o];l&&(l._parent=r,e=typeof l.type=="function"?te(l,e,t):re(t,l,l,n,l._dom,e))}return e}function re(r,e,t,n,o,l){var i;if(e._nextDom!==void 0)i=e._nextDom,e._nextDom=void 0;else if(t==null||o!=l||o.parentNode==null)e:if(l==null||l.parentNode!==r)r.appendChild(o),i=null;else{for(var a=l,s=0;(a=a.nextSibling)&&s<n.length;s+=1)if(a==o)break e;r.insertBefore(o,l),i=l}return l=i!==void 0?i:o.nextSibling}function ne(r){if(r.type==null||typeof r.type=="string")return r._dom;if(r._children)for(var e=r._children.length-1;e>=0;e--){var t=r._children[e];if(t){var n=ne(t);if(n)return n}}return null}function oe(r,e,t){e[0]==="-"?r.setProperty(e,t??""):t==null?r[e]="":typeof t!="number"||he.test(e)?r[e]=t:r[e]=t+"px"}function j(r,e,t,n,o){var l;e:if(e==="style")if(typeof t=="string")r.style.cssText=t;else{if(typeof n=="string"&&(r.style.cssText=n=""),n)for(e in n)t&&e in t||oe(r.style,e,"");if(t)for(e in t)n&&t[e]===n[e]||oe(r.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")if(l=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in r?e.toLowerCase().slice(2):e.slice(2),r._listeners||(r._listeners={}),r._listeners[e+l]=t,t){if(!n){var i=l?ie:le;r.addEventListener(e,i,l)}}else{var a=l?ie:le;r.removeEventListener(e,a,l)}else if(e!=="dangerouslySetInnerHTML"){if(o)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in r)try{r[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e.indexOf("-")==-1?r.removeAttribute(e):r.setAttribute(e,t))}}function le(r){return this._listeners[r.type+!1](f.event?f.event(r):r)}function ie(r){return this._listeners[r.type+!0](f.event?f.event(r):r)}function ae(r,e,t,n,o,l){var i,a=e.type;if(e.constructor!==void 0)return null;(i=f._diff)&&i(e);try{e:if(typeof a=="function"){var s,u,c,_=e.props;if(t._component)c=(s=e._component=t._component)._processingException=s._pendingError;else{if("prototype"in a&&a.prototype.render&&process.env.NODE_ENV==="development")throw new Error("Class component in render method is not supported.");e._component=s=new Z(_),s.constructor=a,s.render=ve,s.props=_,u=s._dirty=!0}if(s.props,s._vnode=e,!u){if(e._original===t._original){e._dom=t._dom,e._children=t._children,e._children.forEach(d=>{d&&(d._parent=e)});break e}}s.props=_,s._parentDom=r;var A=f._render,g=0;do s._dirty=!1,A&&A(e),i=s.render(s.props);while(s._dirty&&++g<25);var v=i!=null&&i.type===M&&i.key==null?i.props.children:i;ee(r,Array.isArray(v)?v:[v],e,t,n,o,l),s.base=e._dom,c&&(s._pendingError=s._processingException=null)}else o==null&&e._original===t._original?(e._children=t._children,e._dom=t._dom):e._dom=function(d,O,L,q,m){var k=L.props,b=O.props,E=O.type,p=0;if(E==="svg"&&(q=!0),m!=null)for(;p<m.length;p++){var N=m[p];if(N&&"setAttribute"in N==!!E&&(E?N.localName===E:N.nodeType===3)){d=N,m[p]=null;break}}if(d==null){if(E===null)return document.createTextNode(b);d=q?document.createElementNS("http://www.w3.org/2000/svg",E):document.createElement(E,b.is&&b),m=null}if(E===null)k!==b&&(d.data=b);else{m=m&&R.call(d.childNodes);var J=(k=L.props||F).dangerouslySetInnerHTML,P=b.dangerouslySetInnerHTML;if(m!=null)for(k={},p=0;p<d.attributes.length;p++)k[d.attributes[p].name]=d.attributes[p].value;if((P||J)&&(P&&(J&&P.__html==J.__html||P.__html===d.innerHTML)||(d.innerHTML=P&&P.__html||"")),function(de,I,$,pe){var h;for(h in $)h==="children"||h==="key"||h in I||j(de,h,null,$[h],pe);for(h in I)h!=="children"&&h!=="key"&&h!=="value"&&h!=="checked"&&$[h]!==I[h]&&j(de,h,I[h],$[h],pe)}(d,b,k,q),P)O._children=[];else if(p=O.props.children,ee(d,Array.isArray(p)?p:[p],O,L,q&&E!=="foreignObject",m,m?m[0]:L._children&&T(L,0)),m!=null)for(p=m.length;p--;)m[p]!=null&&X(m[p]);"value"in b&&(p=b.value)!==void 0&&(p!==d.value||E==="progress"&&!p||E==="option"&&p!==k.value)&&j(d,"value",p,k.value,!1),"checked"in b&&(p=b.checked)!==void 0&&p!==d.checked&&j(d,"checked",p,k.checked,!1)}return d}(t._dom,e,t,n,o);(i=f.diffed)&&i(e)}catch(d){e._original=null,o!=null&&(e._dom=l,o[o.indexOf(l)]=null),f._catchError(d,e,t)}}function se(r,e,t){try{typeof r=="function"?r(e):r.current=e}catch(n){f._catchError(n,t)}}function ce(r,e,t){var n;if(f.unmount&&f.unmount(r),(n=r.ref)&&(n.current&&n.current!==r._dom||se(n,null,e)),(n=r._component)!=null&&(n.base=n._parentDom=null,r._component=void 0),n=r._children)for(var o=0;o<n.length;o++)n[o]&&ce(n[o],e,t||typeof r.type!="function");t||r._dom==null||X(r._dom),r._parent=r._dom=r._nextDom=void 0}function ve(r){return this.constructor(r)}Z.prototype.render=M;class W{constructor(){w(this,"map",new Map)}get(e,t){var n=this.map.get(e);if(n)return t?n.get(t):n}set(e,t,n){var o,l=this.map.get(e);l||(l=new Map,this.map.set(e,l)),(o=l)===null||o===void 0||o.set(t,n)}forEach(e){this.map.forEach((t,n)=>{t.forEach((o,l)=>{e(o,n,l)})})}delete(e){this.map.delete(e)}deleteAll(){this.map.forEach((e,t)=>{this.map.delete(t)})}}class me{constructor(){w(this,"eventMap",new W),w(this,"bindListener",(e,t,n)=>{if(e&&t&&n){var o=this.eventMap.get(e,t);o||(o=new Set,this.eventMap.set(e,t,o)),o.has(n)||(o.add(n),e.addEventListener(t,n,!0))}}),w(this,"removeAllListener",()=>{this.eventMap.forEach((e,t,n)=>{e.forEach(o=>{t.removeEventListener(n,o,!0)})}),this.eventMap.deleteAll()})}}var ye=M;~location.href.indexOf("localhost")&&console.info("%cquarkc@".concat("1.0.58"),"color: white;background:#9f57f8;font-weight:bold;font-size:10px;padding:2px 6px;border-radius: 5px","Running in dev mode.");var H=r=>!(r||r===!1||r===0),_e={observed:!0,type:String,converter:(r,e)=>{var t=r;switch(e){case Number:t=H(r)?r:Number(r);break;case Boolean:t=!([null,"false",!1,void 0].indexOf(r)>-1)}return t}},ue=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(e,t)=>e.constructor.createProperty(t,r)},V=new W,G=new W;function ge(r){var{tag:e,style:t=""}=typeof r=="string"?{tag:r}:r;return n=>{class o extends n{static get observedAttributes(){var i=[],a=V.get(n);return a&&a.forEach((s,u)=>{s.observed&&i.push(u)}),i}static isBooleanProperty(i){var a=!1,s=V.get(n);return s&&s.forEach((u,c)=>{if(u.type===Boolean&&i===c)return a=!0}),a}constructor(){super();var i=this.attachShadow({mode:"open"});if(i)if(typeof CSSStyleSheet=="function"&&i.adoptedStyleSheets){var a=new CSSStyleSheet;a.replaceSync(t),i.adoptedStyleSheets=[a]}else{var s=document.createElement("style");s.innerHTML=t,i.append(s)}var u=G.get(Object.getPrototypeOf(this.constructor));u&&u.forEach((c,_)=>{Object.defineProperty(this,_,c(this[_]))})}}customElements.get(e)||customElements.define(e,o)}}class S extends HTMLElement{constructor(){super(...arguments),w(this,"eventController",new me),w(this,"_controllers",void 0),w(this,"rootPatch",e=>{this.shadowRoot&&function(t,n){f._root&&f._root(t,n);var o=n._children;t=n._children=Y(M,null,[t]),ae(n,t,o||F,n.ownerSVGElement!==void 0,o?null:n.firstChild?R.call(n.childNodes):null,o?o._dom:n.firstChild)}(e,this.shadowRoot)}),w(this,"$on",(e,t,n)=>this.eventController.bindListener(n||this,e,t))}static getPropertyDescriptor(e,t){return n=>({get(){var o=this.getAttribute(e);return H(n)||!H(o)||t.type===Boolean&&o===""?(C(t.converter)&&(o=t.converter(o,t.type)),o):n},set(o){var l=o;C(t.converter)&&(l=t.converter(o,t.type)),H(l)?this.removeAttribute(e):typeof l=="boolean"?l?this.setAttribute(e,""):this.removeAttribute(e):this.setAttribute(e,l)},configurable:!0,enumerable:!0})}static getStateDescriptor(e){return t=>{var n=t;return{get:()=>n,set(o){var l,i=n;n=o,this._render(),(l=this._controllers)===null||l===void 0||l.forEach(a=>{var s;return(s=a.hostUpdated)===null||s===void 0?void 0:s.call(a)}),C(this.componentDidUpdate)&&this.componentDidUpdate(e,i,o)},configurable:!0,enumerable:!0}}}static createProperty(e,t){var n=Object.assign({},_e,t),o=t.attribute||e;V.set(this,o,n),G.set(this,e,this.getPropertyDescriptor(o,n))}static createState(e){G.set(this,e,this.getStateDescriptor(e))}_render(){var e=this.render();this.rootPatch(e)}addController(e){var t,n;((t=this._controllers)!==null&&t!==void 0?t:this._controllers=new Set).add(e),this.shadowRoot&&this.isConnected&&((n=e.hostConnected)===null||n===void 0||n.call(e))}removeController(e){var t;(t=this._controllers)===null||t===void 0||t.delete(e)}requestUpdate(){var e;this._render(),(e=this._controllers)===null||e===void 0||e.forEach(t=>{var n;return(n=t.hostUpdated)===null||n===void 0?void 0:n.call(t)})}update(){this._render()}_updateProperty(){this.constructor.observedAttributes.forEach(e=>{this[e]=this[e]})}_updateBooleanProperty(e){this.constructor.isBooleanProperty(e)&&(this[e]||(this[e]=this[e]))}$emit(e,t){return this.dispatchEvent(new CustomEvent(e,Object.assign({bubbles:!0},t)))}componentDidMount(){}componentWillUnmount(){}shouldComponentUpdate(e,t,n){return t!==n}componentDidUpdate(e,t,n){}render(){return""}connectedCallback(){var e,t;this._updateProperty(),(e=this._controllers)===null||e===void 0||e.forEach(n=>{var o;return(o=n.hostConnected)===null||o===void 0?void 0:o.call(n)}),this._render(),(t=this._controllers)===null||t===void 0||t.forEach(n=>{var o;return(o=n.hostMounted)===null||o===void 0?void 0:o.call(n)}),C(this.componentDidMount)&&this.componentDidMount()}attributeChangedCallback(e,t,n){var o,l=this[e]||n;C(this.shouldComponentUpdate)&&!this.shouldComponentUpdate(e,t,l)||(this._render(),(o=this._controllers)===null||o===void 0||o.forEach(i=>{var a;return(a=i.hostUpdated)===null||a===void 0?void 0:a.call(i)}),C(this.componentDidUpdate)&&this.componentDidUpdate(e,t,l),n!==t&&this._updateBooleanProperty(e))}disconnectedCallback(){var e;C(this.componentWillUnmount)&&this.componentWillUnmount(),this.eventController.removeAllListener(),(e=this._controllers)===null||e===void 0||e.forEach(t=>{var n;return(n=t.hostDisconnected)===null||n===void 0?void 0:n.call(t)}),this.rootPatch(null)}}w(S,"h",Y),w(S,"Fragment",ye);const be=`:root{font-family:Inter,Avenir,Helvetica,Arial,sans-serif;font-size:16px;font-weight:400;color-scheme:light dark;color:#333;background-color:#242424}:host{display:block;margin:0 auto;padding:2rem;text-align:center;width:500px}:host .title{color:#333}.logo{height:6em;padding:1.5em;will-change:filter}.logo:hover{filter:drop-shadow(0 0 2em #646cffaa);transition:all .5s}.card{padding:2em}button{border-radius:8px;border:1px solid transparent;padding:.6em 1.2em;font-size:1em;font-weight:500;font-family:inherit;cursor:pointer;transition:border-color .25s}button:hover{border-color:#646cff}button:focus,button:focus-visible{outline:4px auto -webkit-focus-ring-color}.read-the-docs{color:#888}@media (prefers-color-scheme: light){:root{color:#213547;background-color:#fff}a:hover{color:#747bff}button{background-color:#f9f9f9}}
`;var Ee=Object.defineProperty,we=Object.getOwnPropertyDescriptor,K=(r,e,t,n)=>{for(var o=n>1?void 0:n?we(e,t):e,l=r.length-1,i;l>=0;l--)(i=r[l])&&(o=(n?i(e,t,o):i(o))||o);return n&&o&&Ee(e,t,o),o};let B=class extends S{constructor(){super(...arguments);z(this,"count",0);z(this,"text","");z(this,"add",()=>{this.count+=1})}componentDidMount(){console.log("dom loaded!")}render(){return S.h(S.Fragment,null,S.h("div",null,S.h("a",{href:"https://quarkc.hellobike.com",target:"_blank"},S.h("img",{src:"https://quark-design.hellobike.com/assets/quark-logo.f9a6a307.png",class:"logo",alt:"quark logo"}))),S.h("span",{class:"title"},"我是 Web Components 组件"))}};K([ue({type:Number})],B.prototype,"count",2),K([ue({type:String})],B.prototype,"text",2),B=K([ge({tag:"my-component",style:be})],B)});
